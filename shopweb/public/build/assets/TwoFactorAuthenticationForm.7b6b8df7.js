import{d as _,P as E,o as t,e as s,a as r,r as N,b as a,w as o,i as n,t as C,I as q,n as x,E as R,u as X,j as Q,l as G,c as y,k as O,g as p,f as u,F as U,h as j,K as P}from"./app.0fd1e729.js";import{_ as z}from"./ActionSection.1b13fef9.js";import{a as D}from"./DialogModal.d9b919fc.js";import{_ as H,a as A}from"./TextInput.ee8796d5.js";import{_ as K}from"./PrimaryButton.cd16e772.js";import{_ as T}from"./SecondaryButton.12e19f07.js";import{_ as J}from"./DangerButton.b10ea6f8.js";import{_ as W}from"./InputLabel.1d415e06.js";import"./SectionTitle.7f1ff86c.js";import"./_plugin-vue_export-helper.cdc0426e.js";const Y={class:"mt-4"},Z=n(" H\u1EE7y "),g={__name:"ConfirmsPassword",props:{title:{type:String,default:"X\xE1c nh\u1EADn m\u1EADt kh\u1EA9u"},content:{type:String,default:"\u0110\u1EC3 b\u1EA3o m\u1EADt, vui l\xF2ng x\xE1c nh\u1EADn m\u1EADt kh\u1EA9u c\u1EE7a b\u1EA1n \u0111\u1EC3 ti\u1EBFp t\u1EE5c."},button:{type:String,default:"X\xE1c nh\u1EADn"}},emits:["confirmed"],setup(w,{emit:b}){const i=_(!1),e=E({password:"",error:"",processing:!1}),l=_(null),v=()=>{axios.get(route("password.confirmation")).then(c=>{c.data.confirmed?b("confirmed"):(i.value=!0,setTimeout(()=>l.value.focus(),250))})},f=()=>{e.processing=!0,axios.post(route("password.confirm"),{password:e.password}).then(()=>{e.processing=!1,d(),R().then(()=>b("confirmed"))}).catch(c=>{e.processing=!1,e.error=c.response.data.errors.password[0],l.value.focus()})},d=()=>{i.value=!1,e.password="",e.error=""};return(c,h)=>(t(),s("span",null,[r("span",{onClick:v},[N(c.$slots,"default")]),a(D,{show:i.value,onClose:d},{title:o(()=>[n(C(w.title),1)]),content:o(()=>[n(C(w.content)+" ",1),r("div",Y,[a(H,{ref_key:"passwordInput",ref:l,modelValue:e.password,"onUpdate:modelValue":h[0]||(h[0]=S=>e.password=S),type:"password",class:"mt-1 block w-3/4",placeholder:"M\u1EADt kh\u1EA9u",onKeyup:q(f,["enter"])},null,8,["modelValue","onKeyup"]),a(A,{message:e.error,class:"mt-2"},null,8,["message"])])]),footer:o(()=>[a(T,{onClick:d},{default:o(()=>[Z]),_:1}),a(K,{class:x(["ml-3",{"opacity-25":e.processing}]),disabled:e.processing,onClick:f},{default:o(()=>[n(C(w.button),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}},ee=n(" X\xE1c th\u1EF1c hai y\u1EBFu t\u1ED1 "),te=n(" C\u1EA3i thi\u1EC7n b\u1EA3o m\u1EADt cho t\xE0i kho\u1EA3n c\u1EE7a b\u1EA1n b\u1EB1ng c\xE1ch s\u1EED d\u1EE5ng x\xE1c th\u1EF1c hai y\u1EBFu t\u1ED1. "),oe={key:0,class:"text-lg font-medium text-gray-900"},se={key:1,class:"text-lg font-medium text-gray-900"},ae={key:2,class:"text-lg font-medium text-gray-900"},ne=r("div",{class:"mt-3 max-w-xl text-sm text-gray-600"},[r("p",null," Khi x\xE1c th\u1EF1c hai y\u1EBFu t\u1ED1 \u0111\u01B0\u1EE3c b\u1EADt, b\u1EA1n s\u1EBD \u0111\u01B0\u1EE3c nh\u1EAFc nh\u1EADp m\xE3 th\xF4ng b\xE1o ng\u1EABu nhi\xEAn, an to\xE0n trong qu\xE1 tr\xECnh \u0111\u0103ng nh\u1EADp. B\u1EA1n c\xF3 th\u1EC3 l\u1EA5y m\xE3 th\xF4ng b\xE1o n\xE0y t\u1EEB \u1EE9ng d\u1EE5ng Google Authenticator tr\xEAn \u0111i\u1EC7n tho\u1EA1i c\u1EE7a m\xECnh. ")],-1),ce={key:3},re={key:0},ie={class:"mt-4 max-w-xl text-sm text-gray-600"},le={key:0,class:"font-semibold"},ue={key:1},de=["innerHTML"],he={key:0,class:"mt-4 max-w-xl text-sm text-gray-600"},me={class:"font-semibold"},_e=n(" Kh\xF3a thi\u1EBFt l\u1EADp: "),fe=["innerHTML"],pe={key:1,class:"mt-4"},ve={key:1},ye=r("div",{class:"mt-4 max-w-xl text-sm text-gray-600"},[r("p",{class:"font-semibold"}," L\u01B0u tr\u1EEF c\xE1c m\xE3 kh\xF4i ph\u1EE5c n\xE0y \u1EDF n\u01A1i qu\u1EA3n l\xFD m\u1EADt kh\u1EA9u an to\xE0n. Ch\xFAng c\xF3 th\u1EC3 \u0111\u01B0\u1EE3c s\u1EED d\u1EE5ng \u0111\u1EC3 kh\xF4i ph\u1EE5c quy\u1EC1n truy c\u1EADp v\xE0o t\xE0i kho\u1EA3n c\u1EE7a b\u1EA1n n\u1EBFu thi\u1EBFt b\u1ECB x\xE1c th\u1EF1c hai y\u1EBFu t\u1ED1 c\u1EE7a b\u1EA1n b\u1ECB m\u1EA5t. ")],-1),ge={class:"grid gap-1 max-w-xl mt-4 px-4 py-4 font-mono text-sm bg-gray-100 rounded-lg"},we={class:"mt-5"},xe={key:0},be=n(" B\u1EADt "),ke={key:1},Ce=n(" X\xE1c nh\u1EADn "),Te=n(" T\u1EA1o l\u1EA1i m\xE3 kh\xF4i ph\u1EE5c "),Se=n(" Hi\u1EC3n th\u1ECB m\xE3 kh\xF4i ph\u1EE5c "),Fe=n(" H\u1EE7y "),Ke=n(" T\u1EAFt "),Ee={__name:"TwoFactorAuthenticationForm",props:{requiresConfirmation:Boolean},setup(w){const b=w,i=_(!1),e=_(!1),l=_(!1),v=_(null),f=_(null),d=_([]),c=X({code:""}),h=Q(()=>{var m;return!i.value&&((m=O().props.value.user)==null?void 0:m.two_factor_enabled)});G(h,()=>{h.value||(c.reset(),c.clearErrors())});const S=()=>{i.value=!0,P.Inertia.post("/user/two-factor-authentication",{},{preserveScroll:!0,onSuccess:()=>Promise.all([M(),L(),F()]),onFinish:()=>{i.value=!1,e.value=b.requiresConfirmation}})},M=()=>axios.get("/user/two-factor-qr-code").then(m=>{v.value=m.data.svg}),L=()=>axios.get("/user/two-factor-secret-key").then(m=>{f.value=m.data.secretKey}),F=()=>axios.get("/user/two-factor-recovery-codes").then(m=>{d.value=m.data}),$=()=>{c.post("/user/confirmed-two-factor-authentication",{errorBag:"confirmTwoFactorAuthentication",preserveScroll:!0,preserveState:!0,onSuccess:()=>{e.value=!1,v.value=null,f.value=null}})},I=()=>{axios.post("/user/two-factor-recovery-codes").then(()=>F())},B=()=>{l.value=!0,P.Inertia.delete("/user/two-factor-authentication",{preserveScroll:!0,onSuccess:()=>{l.value=!1,e.value=!1}})};return(m,V)=>(t(),y(z,null,{title:o(()=>[ee]),description:o(()=>[te]),content:o(()=>[p(h)&&!e.value?(t(),s("h3",oe," B\u1EA1n \u0111\xE3 b\u1EADt x\xE1c th\u1EF1c hai y\u1EBFu t\u1ED1 ")):p(h)&&e.value?(t(),s("h3",se," Ho\xE0n t\u1EA5t vi\u1EC7c b\u1EADt x\xE1c th\u1EF1c hai y\u1EBFu t\u1ED1 ")):(t(),s("h3",ae," B\u1EA1n ch\u01B0a b\u1EADt x\xE1c th\u1EF1c hai y\u1EBFu t\u1ED1 ")),ne,p(h)?(t(),s("div",ce,[v.value?(t(),s("div",re,[r("div",ie,[e.value?(t(),s("p",le," \u0110\u1EC3 ho\xE0n t\u1EA5t vi\u1EC7c b\u1EADt x\xE1c th\u1EF1c hai y\u1EBFu t\u1ED1, h\xE3y qu\xE9t m\xE3 [QR] sau b\u1EB1ng \u1EE9ng d\u1EE5ng x\xE1c th\u1EF1c tr\xEAn \u0111i\u1EC7n tho\u1EA1i (Google Authenticator,...) ho\u1EB7c nh\u1EADp [Kh\xF3a thi\u1EBFt l\u1EADp] v\xE0 cung c\u1EA5p m\xE3 OTP \u0111\xE3 t\u1EA1o. ")):(t(),s("p",ue," Two factor authentication is now enabled. Scan the following QR code using your phone's authenticator application or enter the setup key. "))]),r("div",{class:"mt-4",innerHTML:v.value},null,8,de),f.value?(t(),s("div",he,[r("p",me,[_e,r("span",{innerHTML:f.value},null,8,fe)])])):u("",!0),e.value?(t(),s("div",pe,[a(W,{for:"code",value:"M\xE3 OTP"}),a(H,{id:"code",modelValue:p(c).code,"onUpdate:modelValue":V[0]||(V[0]=k=>p(c).code=k),type:"text",name:"code",class:"block mt-1 w-1/2",inputmode:"numeric",autofocus:"",autocomplete:"one-time-code",onKeyup:q($,["enter"])},null,8,["modelValue","onKeyup"]),a(A,{message:p(c).errors.code,class:"mt-2"},null,8,["message"])])):u("",!0)])):u("",!0),d.value.length>0&&!e.value?(t(),s("div",ve,[ye,r("div",ge,[(t(!0),s(U,null,j(d.value,k=>(t(),s("div",{key:k},C(k),1))),128))])])):u("",!0)])):u("",!0),r("div",we,[p(h)?(t(),s("div",ke,[a(g,{onConfirmed:$},{default:o(()=>[e.value?(t(),y(K,{key:0,type:"button",class:x(["mr-3",{"opacity-25":i.value}]),disabled:i.value},{default:o(()=>[Ce]),_:1},8,["class","disabled"])):u("",!0)]),_:1}),a(g,{onConfirmed:I},{default:o(()=>[d.value.length>0&&!e.value?(t(),y(T,{key:0,class:"mr-3"},{default:o(()=>[Te]),_:1})):u("",!0)]),_:1}),a(g,{onConfirmed:F},{default:o(()=>[d.value.length===0&&!e.value?(t(),y(T,{key:0,class:"mr-3"},{default:o(()=>[Se]),_:1})):u("",!0)]),_:1}),a(g,{onConfirmed:B},{default:o(()=>[e.value?(t(),y(T,{key:0,class:x({"opacity-25":l.value}),disabled:l.value},{default:o(()=>[Fe]),_:1},8,["class","disabled"])):u("",!0)]),_:1}),a(g,{onConfirmed:B},{default:o(()=>[e.value?u("",!0):(t(),y(J,{key:0,class:x({"opacity-25":l.value}),disabled:l.value},{default:o(()=>[Ke]),_:1},8,["class","disabled"]))]),_:1})])):(t(),s("div",xe,[a(g,{onConfirmed:S},{default:o(()=>[a(K,{type:"button",class:x({"opacity-25":i.value}),disabled:i.value},{default:o(()=>[be]),_:1},8,["class","disabled"])]),_:1})]))])]),_:1}))}};export{Ee as default};
